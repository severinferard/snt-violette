<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Pause dej' - Le Jap</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
      rel="stylesheet"
    />
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
      integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
      crossorigin=""
    />
    <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js" integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ==" crossorigin=""></script>

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="main-container">
      <header>
        <a href="./index.html"><img src="./assets/logo.png" alt="Pause dej'" /></a>
      </header>
      <nav>
        <a href="la-pizza-du-dimanche-soir.html"><div class="link-card">La Pizza du Dimanche soir</div></a>
        <a href="le-ptit-auchan.html"><div class="link-card">Le Ptit Auchan</div></a>
        <a href="le-grand-auchan.html"><div class="link-card">Le Grand Auchan</div></a>
        <a href="le-jap.html"><div class="link-card link-card-selected">Le jap'</div></a>
        <a href="le-grec.html"><div class="link-card">Le Grec</div></a>
        <a href="pizza-break.html"><div class="link-card">Pizza Break</div></a>
        <a href="la-cantoche.html"><div class="link-card">La cantoche</div></a>
      </nav>
      <div style="display: flex; height: 100vh;">
        <div class="establishment-container">
            <img src="./assets/le-jap.jpg" alt="" width="90%">
        
            <div class="presentation">
              Nakashima est un petit restaurant chaleureux et intimiste pour venir manger le midi avec ses formules pour gros et petit mangeurs , il contente petit et grands malgré son budget quelquefois conséquent pour un lycéen , à tester occasionnellement  !
            </div>
            <div id="map" style="height: 300px; width: 90%;"></div>
        </div>
        <div class="reviews-container">

            <div class="review-box">
                <div class="review-header">
                    <div class="review-name">Vic Tabestlife</div>
                    <div class="review-date">11/01/22</div>
                </div>
                <div class="review-stars">
                    <span class="fa fa-star checked"></span>
                    <span class="fa fa-star checked"></span>
                    <span class="fa fa-star checked"></span>
                    <span class="fa fa-star checked"></span>
                    <span class="fa fa-star checked"></span>
                </div>
                <div class="review-body">
                  Clients depuis notre arrivée à Verneuil, mon mari et moi sommes maintenant des habitués de Nakashima, leurs sushis, makis, ainsi que leurs brochettes (surtout boeuf fromage et ailes de poulet) sont très bons, l'accueil est top. On peut voir que les tenants du resto se donnent beaucoup. On est toujours super content de nos commandes, en plus,il y a une boisson offerte à partie de 30 euros.
                </div>
                <div class="spacer"></div>
            </div>

            <div class="review-box">
              <div class="review-header">
                  <div class="review-name">Rachel D.</div>
                  <div class="review-date">24/03/22</div>
              </div>
              <div class="review-stars">
                  <span class="fa fa-star checked"></span>
                  <span class="fa fa-star checked"></span>
                  <span class="fa fa-star checked"></span>
                  <span class="fa fa-star checked"></span>
                  <span class="fa fa-star checked"></span>
              </div>
              <div class="review-body">
                Excellent service, produits frais et bons. Bonne communication. Double étoile pour la sauce vignette maison qui est à tomber 
              </div>
              <div class="spacer"></div>
          </div>

          <div class="review-box">
            <div class="review-header">
                <div class="review-name">Nicole Rae</div>
                <div class="review-date">22/02/21</div>
            </div>
            <div class="review-stars">
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star checked"></span>
                <span class="fa fa-star "></span>
                <span class="fa fa-star "></span>
                <span class="fa fa-star "></span>
            </div>
            <div class="review-body">
              Leurs plats sont plutôt bons par contre leur organisation c’est juste pas possible. Une heure d’attente dehors dans le froid qui plus est, pour récupérer sa commande. Troupeau d’attente devant la boutique. C’est juste pas possible. On est trois à devoir récupérer la commande à la même heure. Une heure plus tard on est encore là à attendre. Commande incomplète. C’est pas bien de faire ça. Et c’est tellement dommage.
            </div>
            <div class="spacer"></div>
        </div>



        <div class="new-review">
          <p>Partagez votre avis !</p>
          <textarea name="review" id="new-review-text" rows="7"></textarea>
          <div class="starts-wrapper">
          <div class="review-stars">
                <span class="fa fa-star star-editable"></span>
                <span class="fa fa-star star-editable"></span>
                <span class="fa fa-star star-editable"></span>
                <span class="fa fa-star star-editable"></span>
                <span class="fa fa-star star-editable checked"></span>
          </div>
        </div>
          <button class="save-btn">Enregistrer</button>
        </div>

        </div>
    </div>
    <div class="spacer"></div>
    <footer><strong>Ce site web constitue un projet pédagogique réalisé dans le cadre d'un cours de Sciences numériques et technologiques de 2nde.</strong><br> Une partie de avis affichés sur ce site provient de compte Google Buisness des établissements en question. Le contenue de ce site ainsi que les divers avis présentés n'ont en aucun cas visée diffamatoire. Pour toute réclamation, contactez Séverin FERARD severin.ferard@outlook.com</footer>
  
  </body>

  <script>
    coords = [48.980904, 1.974504]
    var map = L.map("map").setView(coords, 14);
    var osmLayer = L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png", {
      attribution: "© OpenStreetMap contributors",
      maxZoom: 19,
    });
    map.addLayer(osmLayer);

    L.marker(coords)
      .addTo(map)
      .bindPopup("La Pizza du Dimanche Soir")
      .on("mouseover", function (e) {
        this.openPopup();
      })
      .on("mouseout", function (e) {
        this.closePopup();
      });
  </script>

  <script>
    rating = 1;

    stars = document.querySelectorAll('.star-editable')
    stars.forEach((star, i) => {
      star.addEventListener('click', e => {
        stars.forEach((s_, i_) => {
          rating = 5 - i
          console.log(rating)
          if (i_ >= i) {
            s_.classList.add('checked')
          } else {
            s_.classList.remove('checked')
          }
        })
      })
    });

    saveBtn = document.querySelector(".save-btn")
    saveBtn.addEventListener("click", e => {
      // Get user text
      text = document.querySelector("#new-review-text").value

      container = document.querySelector(".reviews-container")

      // Create new review
      newReview = document.createElement('div')
      newReview.classList.add('review-box')
      newReview.innerHTML = `
      <div class="review-box">
            <div class="review-header">
                <div class="review-name">Anonyme</div>
                <div class="review-date">${(new Date()).toLocaleDateString('fr-FR')}</div>
            </div>
            <div class="review-stars">
                <span class="fa fa-star ${rating >= 1 ? 'checked' : ''}"></span>
                <span class="fa fa-star ${rating >= 2 ? 'checked' : ''}"></span>
                <span class="fa fa-star ${rating >= 3 ? 'checked' : ''}"></span>
                <span class="fa fa-star ${rating >= 4 ? 'checked' : ''}"></span>
                <span class="fa fa-star ${rating >= 5 ? 'checked' : ''}"></span>
            </div>
            <div class="review-body">
              ${text}
            </div>
            <div class="spacer"></div>
        </div>
      `

      // Add new review to the container
      container.insertBefore(newReview, document.querySelector(".new-review"))

      // Reset text
      document.querySelector("#new-review-text").value = ''

      // Reset stars
      document.querySelectorAll('.star-editable').forEach((star, i) => {
        if (i < 4)
          star.classList.remove("checked")
      })


      
    })

  </script>
</html>
